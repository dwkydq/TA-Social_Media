{% extends 'base.html' %}

{% block content %}
<div class="p-6">
    <h2 class="text-2xl font-black text-white mb-6 border-b border-gray-800 pb-4">Jelajahi Dunia XYZ</h2>

    <div class="columns-1 md:columns-2 lg:columns-3 gap-6 space-y-6">
        
        {% for post in posts %}
        <div class="bg-zinc-900 border-2 border-black p-4 break-inside-avoid shadow-[4px_4px_0px_0px_#fbbf24] rounded-xl hover:-translate-y-1 transition duration-300">
            
            <div class="flex items-center gap-3 mb-3">
                <img src="{{ url_for('static', filename='uploads/' + post.author.profile_pic) if post.author.profile_pic else 'https://ui-avatars.com/api/?name=' + post.author.name }}" 
                     class="w-8 h-8 rounded-full border border-white object-cover">
                <div class="overflow-hidden">
                    <a href="{{ url_for('user.profile', username=post.author.username) }}" class="font-bold text-white text-sm hover:underline truncate block">
                        @{{ post.author.username }}
                    </a>
                </div>
            </div>

            {% if post.media_url %}
                <div class="mb-3 rounded-lg overflow-hidden border border-gray-700">
                    {% if post.media_type == 'video' %}
                        <video controls class="w-full bg-black">
                            <source src="{{ url_for('static', filename='uploads/' + post.media_url) }}" type="video/mp4">
                        </video>
                    {% else %}
                        <img src="{{ url_for('static', filename='uploads/' + post.media_url) }}" class="w-full object-cover">
                    {% endif %}
                </div>
            {% endif %}

            <p class="text-white text-sm mb-3 line-clamp-3">{{ post.caption }}</p>

            <div class="flex justify-between items-center border-t border-gray-700 pt-3">
                <div class="flex gap-4 text-gray-400 text-xs">
                    <span><i class="fas fa-heart text-red-500"></i> {{ post.likes|length }}</span>
                    <span><i class="fas fa-comment text-blue-400"></i> {{ post.comments|length }}</span>
                </div>
                <a href="{{ url_for('post.post_detail', post_id=post.id) }}" class="text-xyz-yellow text-xs font-bold hover:underline">Lihat</a>
            </div>

        </div>
        {% else %}
            <p class="text-gray-500 col-span-full text-center">Belum ada postingan menarik.</p>
        {% endfor %}

    </div>
</div>
{% endblock %}